<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TreeSense 路 Urban Mode</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = {
      theme: {
        extend: {
          colors: {
            space: {
              900: '#020402',
              800: '#050d07',
              700: '#0c1f13'
            },
            forest: {
              300: '#8cfab3',
              400: '#2ee06a'
            }
          }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{
      font-family:"Inter",Segoe UI,system-ui,-apple-system,Helvetica,Arial,sans-serif;
      min-height:100vh;
      background:radial-gradient(circle at top,#0f3720 0%,rgba(0,0,0,0) 50%),#020805;
      color:#e4f9ec;
    }
    .panel-glass{border:1px solid rgba(255,255,255,0.08);background:rgba(2,7,4,0.7);box-shadow:0 20px 60px rgba(0,0,0,0.55);backdrop-filter:blur(14px)}
  </style>
</head>

<body class="min-h-screen bg-gradient-to-b from-space-900 via-space-800 to-space-700 text-emerald-50">
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#123c24_0%,transparent_35%)] opacity-50" aria-hidden="true"></div>
  <div class="relative mx-auto flex min-h-screen w-full max-w-7xl flex-col gap-10 px-6 py-12 lg:flex-row">
    <div class="panel-glass relative z-10 w-full max-w-xl rounded-3xl p-8">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-xs uppercase tracking-[0.5em] text-emerald-200/70">TreeSense</p>
          <h1 class="mt-2 text-3xl font-semibold text-white">Urban Mode</h1>
          <p class="text-sm text-emerald-200/80">Upload an image or video to begin.</p>
        </div>
        <span class="rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-semibold tracking-widest text-emerald-300">YOLOv8</span>
      </div>

      <div id="dropzone" role="button" tabindex="0" aria-label="Upload image or video" class="mt-8 flex h-56 w-full cursor-pointer flex-col items-center justify-center rounded-2xl border border-dashed border-emerald-500/40 bg-black/30 text-center transition hover:-translate-y-1 hover:border-emerald-400 hover:bg-black/40">
        <svg class="h-12 w-12 text-emerald-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 16V4m0 12 3.5-3.5M12 16l-3.5-3.5M6 20h12" />
        </svg>
        <p class="mt-3 text-lg font-semibold text-white">Click or drag to upload</p>
        <p class="text-sm text-emerald-200/70">Supports JPG 路 PNG 路 MP4 路 MOV</p>
      </div>
      <input id="fileInput" type="file" accept="image/*,video/*" hidden>

      <img id="previewImg" class="mt-6 hidden w-full rounded-2xl border border-white/10" alt="Preview image" />
      <video id="previewVideo" class="mt-6 hidden w-full rounded-2xl border border-white/10" controls></video>

      <div class="mt-6 flex flex-wrap gap-3">
        <button id="startBtn" class="btn btn-success flex-1 bg-emerald-400/90 text-sm font-semibold uppercase tracking-wide text-black shadow-lg shadow-emerald-500/40">Start Detection</button>
        <button id="clearBtn" class="btn btn-outline-light flex-1 bg-transparent text-sm font-semibold uppercase tracking-wide">Clear</button>
      </div>
    </div>

    <div id="outputPanel" class="panel-glass relative z-10 hidden flex-1 flex-col rounded-3xl p-8">
      <div class="flex flex-col gap-2">
        <p class="text-xs uppercase tracking-[0.6em] text-emerald-300/80">Pipeline Status</p>
        <div class="h-1.5 w-full rounded-full bg-white/10">
          <div id="progressBar" class="h-full rounded-full bg-gradient-to-r from-forest-400 to-emerald-300 transition-[width]"></div>
        </div>
        <span id="statusLabel" class="text-sm text-emerald-200/70">Idle</span>
      </div>

      <div id="logs" class="mt-6 h-64 w-full rounded-2xl border border-white/10 bg-black/40 p-4 text-sm font-mono leading-relaxed text-emerald-100 overflow-y-auto">Waiting for detection...</div>
      <p id="count" class="mt-4 text-lg font-semibold text-white"></p>
      <img id="annotated" class="mt-4 hidden w-full rounded-2xl border border-white/10" alt="Annotated detections" />
      <video id="videoResult" class="mt-4 hidden w-full rounded-2xl border border-white/10" controls></video>
      <a id="downloadLink" class="mt-4 hidden rounded-2xl border border-white/20 bg-black/30 px-4 py-3 text-center text-sm font-semibold text-emerald-50" download>Download</a>
      <button id="analysisBtn" class="btn btn-outline-success mt-4 hidden w-full text-sm font-semibold uppercase tracking-wide" type="button" disabled>Show Analysis</button>
    </div>
  </div>

  <script type="module" src="/static/script.js"></script>
</body>
</html>
